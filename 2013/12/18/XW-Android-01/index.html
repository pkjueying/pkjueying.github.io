<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="hello, It's me......"><title>XW-Android-01 | Drogon龘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">XW-Android-01</h1><a id="logo" href="/.">Drogon龘</a><p class="description">蒹葭苍苍,道阻且长......</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/book/"><i class="fa fa-book"> 书籍</i></a><a href="/heart/"><i class="fa fa-heart"> 可可</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/history/"><i class="fa fa-history"> 历史</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">XW-Android-01</h1><div class="post-meta">Dec 18, 2013<span> | </span><span class="category"><a href="/categories/old-blog/">old blog</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2013/12/18/XW-Android-01/" href="/2013/12/18/XW-Android-01/#comments" class="ds-thread-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#关机充电图标不显示："><span class="toc-number">1.</span> <span class="toc-text">关机充电图标不显示：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#data分区扩到4G-恢复出厂设置就没作用了"><span class="toc-number">2.</span> <span class="toc-text">data分区扩到4G 恢复出厂设置就没作用了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#支持多用户功能"><span class="toc-number">3.</span> <span class="toc-text">支持多用户功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在首次开机时默认将Play商店停用"><span class="toc-number">4.</span> <span class="toc-text">在首次开机时默认将Play商店停用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1系统在播放视频时，视频切换会出现花屏："><span class="toc-number">5.</span> <span class="toc-text">4.1系统在播放视频时，视频切换会出现花屏：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加新的产品编译项："><span class="toc-number">6.</span> <span class="toc-text">添加新的产品编译项：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#播放Mp3，屏幕暗下去以后，调节音量键无效"><span class="toc-number">7.</span> <span class="toc-text">播放Mp3，屏幕暗下去以后，调节音量键无效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Google-Play-搜不到某个应用"><span class="toc-number">8.</span> <span class="toc-text">Google Play 搜不到某个应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Google-Play-上下载的水果忍者运行出错"><span class="toc-number">9.</span> <span class="toc-text">Google Play 上下载的水果忍者运行出错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内存使用状态显示问题："><span class="toc-number">10.</span> <span class="toc-text">内存使用状态显示问题：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#隐藏状态栏："><span class="toc-number">11.</span> <span class="toc-text">隐藏状态栏：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#预装APK过大，升级固件在一定百分比出错"><span class="toc-number">12.</span> <span class="toc-text">预装APK过大，升级固件在一定百分比出错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#蓝牙可用设备会显示之前搜索到但已关闭的设备"><span class="toc-number">13.</span> <span class="toc-text">蓝牙可用设备会显示之前搜索到但已关闭的设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改Launcher显示的列数"><span class="toc-number">14.</span> <span class="toc-text">修改Launcher显示的列数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#状态栏的日期格式不随设置的日期格式改变"><span class="toc-number">15.</span> <span class="toc-text">状态栏的日期格式不随设置的日期格式改变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#超请播放器分享功能相关问题"><span class="toc-number">16.</span> <span class="toc-text">超请播放器分享功能相关问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Google-Chrome-进Setting-停止运行"><span class="toc-number">17.</span> <span class="toc-text">Google Chrome 进Setting 停止运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#升级后首次开机不显示音量图标"><span class="toc-number">18.</span> <span class="toc-text">升级后首次开机不显示音量图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#视频实时旋转"><span class="toc-number">19.</span> <span class="toc-text">视频实时旋转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失"><span class="toc-number">20.</span> <span class="toc-text">开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解锁界面应用图标特大"><span class="toc-number">21.</span> <span class="toc-text">解锁界面应用图标特大</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高清播放器图片预览时，不是居中"><span class="toc-number">22.</span> <span class="toc-text">高清播放器图片预览时，不是居中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#休眠间歇性唤醒"><span class="toc-number">23.</span> <span class="toc-text">休眠间歇性唤醒</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#音乐播放器中，均衡器界面不起作用"><span class="toc-number">24.</span> <span class="toc-text">音乐播放器中，均衡器界面不起作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改播放器拖动时的状态条宽度"><span class="toc-number">25.</span> <span class="toc-text">修改播放器拖动时的状态条宽度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Music播放器无法点击前一首"><span class="toc-number">26.</span> <span class="toc-text">Music播放器无法点击前一首</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Google拼音输入法，横屏时有些应用没有中文选项"><span class="toc-number">27.</span> <span class="toc-text">Google拼音输入法，横屏时有些应用没有中文选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#播放电影字幕与菜单重叠"><span class="toc-number">28.</span> <span class="toc-text">播放电影字幕与菜单重叠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卡启动，Nand分区识别"><span class="toc-number">29.</span> <span class="toc-text">卡启动，Nand分区识别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Android4-0-蓝牙键盘不能用"><span class="toc-number">30.</span> <span class="toc-text">Android4.0 蓝牙键盘不能用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#让多台机器公用一个下载帐号"><span class="toc-number">31.</span> <span class="toc-text">让多台机器公用一个下载帐号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高清播放器删除最后一张图片，图片再无法移动"><span class="toc-number">32.</span> <span class="toc-text">高清播放器删除最后一张图片，图片再无法移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在系统中去掉蓝牙相关功能"><span class="toc-number">33.</span> <span class="toc-text">在系统中去掉蓝牙相关功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字体为超大时，竖屏在解锁界面，解锁的图标显示不全"><span class="toc-number">34.</span> <span class="toc-text">字体为超大时，竖屏在解锁界面，解锁的图标显示不全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#音效里的Normal和Flat功能反"><span class="toc-number">35.</span> <span class="toc-text">音效里的Normal和Flat功能反</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态壁纸，线性光幕效果有黑块"><span class="toc-number">36.</span> <span class="toc-text">动态壁纸，线性光幕效果有黑块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改Setting里面各字体对应的大小"><span class="toc-number">37.</span> <span class="toc-text">修改Setting里面各字体对应的大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浏览器为Android模式时在线看视频卡"><span class="toc-number">38.</span> <span class="toc-text">浏览器为Android模式时在线看视频卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Android2-3上开启U盘自扫描"><span class="toc-number">39.</span> <span class="toc-text">Android2.3上开启U盘自扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何降低CPU最高频率"><span class="toc-number">40.</span> <span class="toc-text">如何降低CPU最高频率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改sys-config-fex，不升级整个固件，就使其生效"><span class="toc-number">41.</span> <span class="toc-text">修改sys_config.fex，不升级整个固件，就使其生效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改浏览器默认浏览模式"><span class="toc-number">42.</span> <span class="toc-text">修改浏览器默认浏览模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#电源管理不准以及低电不关机"><span class="toc-number">43.</span> <span class="toc-text">电源管理不准以及低电不关机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何单独替换内核"><span class="toc-number">44.</span> <span class="toc-text">如何单独替换内核</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#摄像头Zoom功能生效"><span class="toc-number">45.</span> <span class="toc-text">摄像头Zoom功能生效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#录象时不能选择分辨率"><span class="toc-number">46.</span> <span class="toc-text">录象时不能选择分辨率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改蓝牙名称"><span class="toc-number">47.</span> <span class="toc-text">修改蓝牙名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为何用UsbManager调用getDeviceList获取设备列表总是空的"><span class="toc-number">48.</span> <span class="toc-text">为何用UsbManager调用getDeviceList获取设备列表总是空的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#低电自动关机重启"><span class="toc-number">49.</span> <span class="toc-text">低电自动关机重启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改鼠标的按键定义"><span class="toc-number">50.</span> <span class="toc-text">修改鼠标的按键定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改system分区大小"><span class="toc-number">51.</span> <span class="toc-text">修改system分区大小</span></a></li></ol></div></div><div class="post-content"><h3 id="关机充电图标不显示："><a href="#关机充电图标不显示：" class="headerlink" title="关机充电图标不显示："></a>关机充电图标不显示：</h3><p>现象：<br>开机后，插入充电器，再按正常流程关机。 关机后，短按power键，屏幕无充电图标显示(此时充电器还是插入的)。</p>
<p>解决方法：<br>配置 [pmu_para] power_start = 0 即可</p>
<h3 id="data分区扩到4G-恢复出厂设置就没作用了"><a href="#data分区扩到4G-恢复出厂设置就没作用了" class="headerlink" title="data分区扩到4G 恢复出厂设置就没作用了"></a>data分区扩到4G 恢复出厂设置就没作用了</h3><p>解决方法：</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">diff --git a/drivers/mtd/nand/sunxi_nand.c b/drivers/mtd/nand/sunxi_nand.c</span><br><span class="line">old mode <span class="number">100644</span></span><br><span class="line"><span class="keyword">new</span> mode <span class="number">100755</span></span><br><span class="line">index <span class="number">10</span>b672a..<span class="number">469</span>ce7c</span><br><span class="line">--- a/drivers/mtd/nand/sunxi_nand.c</span><br><span class="line">+++ b/drivers/mtd/nand/sunxi_nand.c</span><br><span class="line">@ -<span class="number">38</span>,<span class="number">7</span> +<span class="number">38</span>,<span class="number">7</span> @ <span class="keyword">int</span> sunxi_nand_read_opts(nand_info_t *nand, <span class="built_in">uint</span> offset, size_t *length,</span><br><span class="line">unsigned <span class="keyword">int</span> nSectNum,  nSectorCnt;</span><br><span class="line">- nSectNum = (unsigned <span class="keyword">int</span>)(offset / <span class="number">512</span>);</span><br><span class="line">+ nSectNum = (unsigned <span class="keyword">int</span>)(offset );</span><br><span class="line">nSectorCnt = (unsigned <span class="keyword">int</span>)(*length / <span class="number">512</span>);</span><br><span class="line">\#ifdef DEBUG</span><br><span class="line">printf(<span class="string">"sunxi nand read: start sector %x counts %x "</span>, nSectNum, nSectorCnt);</span><br><span class="line">@ -<span class="number">51</span>,<span class="number">7</span> +<span class="number">51</span>,<span class="number">7</span> @ <span class="keyword">int</span> sunxi_nand_write_opts(nand_info_t *nand, <span class="built_in">uint</span> offset, size_t *length,</span><br><span class="line">unsigned <span class="keyword">int</span> nSectNum,  nSectorCnt;</span><br><span class="line">- nSectNum = (unsigned <span class="keyword">int</span>)(offset / <span class="number">512</span>);</span><br><span class="line">+ nSectNum = (unsigned <span class="keyword">int</span>)(offset);</span><br><span class="line">nSectorCnt = (unsigned <span class="keyword">int</span>)(*length / <span class="number">512</span>);</span><br><span class="line">\#ifdef DEBUG</span><br><span class="line">printf(<span class="string">"sunxi nand write: start sector %x counts %x "</span>, nSectNum, nSectorCnt);</span><br><span class="line">diff --git a/drivers/storage_type/sunxi_flash.c b/drivers/storage_type/sunxi_flash.c</span><br><span class="line">index c78c392..<span class="number">2</span>c9cf17 <span class="number">100755</span></span><br><span class="line">--- a/drivers/storage_type/sunxi_flash.c</span><br><span class="line">+++ b/drivers/storage_type/sunxi_flash.c</span><br><span class="line">@ -<span class="number">66</span>,<span class="number">7</span> +<span class="number">66</span>,<span class="number">7</span> @ sunxi_flash_nand_read(unsigned <span class="keyword">int</span> start_block, unsigned <span class="keyword">int</span> nblock, <span class="keyword">void</span> *buffe</span><br><span class="line">tick_printf(FILE, LINE);</span><br><span class="line">        nsize = nblock&lt;&lt;<span class="number">9</span>;</span><br><span class="line">-       ret = sunxi_nand_read_opts(&amp;nand_info[<span class="number">0</span>], start_block&lt;&lt;<span class="number">9</span>, &amp;nsize, buffer, <span class="number">0</span>);</span><br><span class="line">+       ret = sunxi_nand_read_opts(&amp;nand_info[<span class="number">0</span>], start_block, &amp;nsize, buffer, <span class="number">0</span>);</span><br><span class="line">        tick_printf(FILE, LINE);</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">@ -<span class="number">77</span>,<span class="number">7</span> +<span class="number">77</span>,<span class="number">7</span> @ sunxi_flash_nand_write(unsigned <span class="keyword">int</span> start_block, unsigned <span class="keyword">int</span> nblock, <span class="keyword">void</span> *buff</span><br><span class="line">        unsigned <span class="keyword">int</span> nsize;</span><br><span class="line">nsize = nblock&lt;&lt;<span class="number">9</span>;</span><br><span class="line">-       <span class="keyword">return</span> sunxi_nand_write_opts(&amp;nand_info[<span class="number">0</span>], start_block&lt;&lt;<span class="number">9</span>, &amp;nsize, buffer, <span class="number">0</span>);</span><br><span class="line">+       <span class="keyword">return</span> sunxi_nand_write_opts(&amp;nand_info[<span class="number">0</span>], start_block, &amp;nsize, buffer, <span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="支持多用户功能"><a href="#支持多用户功能" class="headerlink" title="支持多用户功能"></a>支持多用户功能</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">integer</span> <span class="attr">name</span>=<span class="string">"config_multiuserMaximumUsers"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="在首次开机时默认将Play商店停用"><a href="#在首次开机时默认将Play商店停用" class="headerlink" title="在首次开机时默认将Play商店停用"></a>在首次开机时默认将Play商店停用</h3><p>修改：packages\apps\Provision，在这里将vending应用停用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PackageManager pm = getPackageManager();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	pm.setApplicationEnabledSetting(<span class="string">"com.android.vending"</span>, 				PackageManager.COMPONENT_ENABLED_STATE_DISABLED_USER, <span class="number">0</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">	android.util.Log.i(<span class="string">"chen"</span>, <span class="string">"change fail"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>并在Provision应用的AndroidManifest.xml中增加权限<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_COMPONENT_ENABLED_STATE"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-1系统在播放视频时，视频切换会出现花屏："><a href="#4-1系统在播放视频时，视频切换会出现花屏：" class="headerlink" title="4.1系统在播放视频时，视频切换会出现花屏："></a>4.1系统在播放视频时，视频切换会出现花屏：</h3><p>在 device\softwinner\common\hardware\libhardware\hwcomposer\hwcomposer.cpp  里</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hwc_show</span><span class="params">(sun4i_hwc_context_t *ctx,uint32_t value)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">long</span>               args[<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span>                screen_idx;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">for</span>(screen_idx=<span class="number">0</span>; screen_idx&lt;<span class="number">2</span>; screen_idx++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span>(((screen_idx == <span class="number">0</span>) &amp;&amp; (ctx-&gt;mode==HWC_MODE_SCREEN0 || ctx-&gt;mode==HWC_MODE_SCREEN0_AND_SCREEN1 ))</span><br><span class="line">              || ((screen_idx == <span class="number">1</span>) &amp;&amp; (ctx-&gt;mode == HWC_MODE_SCREEN1 || ctx-&gt;mode==HWC_MODE_SCREEN0_TO_SCREEN1 || ctx-&gt;mode==HWC_MODE_SCREEN0_AND_SCREEN1)))</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">if</span>(ctx-&gt;video_layerhdl[screen_idx] != <span class="number">0</span>)</span><br><span class="line">              &#123;</span><br><span class="line">                  <span class="keyword">if</span>(value == <span class="number">0</span>)</span><br><span class="line">                  &#123;</span><br><span class="line">                      args[<span class="number">0</span>]                         = screen_idx;</span><br><span class="line">                      args[<span class="number">1</span>]                         = ctx-&gt;video_layerhdl[screen_idx];</span><br><span class="line">                      ioctl(ctx-&gt;dispfd, DISP_CMD_LAYER_CLOSE,args);</span><br><span class="line"> </span><br><span class="line">                      args[<span class="number">0</span>]                         = screen_idx;</span><br><span class="line">                      args[<span class="number">1</span>]                         = ctx-&gt;video_layerhdl[screen_idx];</span><br><span class="line">                      ret = ioctl(ctx-&gt;dispfd, DISP_CMD_VIDEO_STOP, args);</span><br><span class="line"> </span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">else</span></span><br><span class="line">                  &#123;</span><br><span class="line">                      args[<span class="number">0</span>]                         = screen_idx;</span><br><span class="line">                      args[<span class="number">1</span>]                         = ctx-&gt;video_layerhdl[screen_idx];</span><br><span class="line">                      ioctl(ctx-&gt;dispfd, DISP_CMD_LAYER_OPEN,args);</span><br><span class="line"> </span><br><span class="line">                      args[<span class="number">0</span>]                         = screen_idx;</span><br><span class="line">                      args[<span class="number">1</span>]                         = ctx-&gt;video_layerhdl[screen_idx];</span><br><span class="line">                      ret = ioctl(ctx-&gt;dispfd, DISP_CMD_VIDEO_START, args);</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">   return ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 hwc_setparameter 函数加上<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(param == HWC_LAYER_SHOW)&#123;</span><br><span class="line">ret = hwc_show(ctx,value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="添加新的产品编译项："><a href="#添加新的产品编译项：" class="headerlink" title="添加新的产品编译项："></a>添加新的产品编译项：</h3><p>以abcd为例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp -r crane-m1003h6 crane-abcd</span><br><span class="line"><span class="built_in">cd</span> crane-abcd</span><br><span class="line">grep -r <span class="_">-l</span> <span class="string">"m1003h6"</span> ./* | xargs sed -i <span class="string">'s/m1003h6/abcd/g'</span></span><br><span class="line">mv crane_m1003h6.mk crane_abcd.mk</span><br></pre></td></tr></table></figure>
<h3 id="播放Mp3，屏幕暗下去以后，调节音量键无效"><a href="#播放Mp3，屏幕暗下去以后，调节音量键无效" class="headerlink" title="播放Mp3，屏幕暗下去以后，调节音量键无效"></a>播放Mp3，屏幕暗下去以后，调节音量键无效</h3><p>去掉isScreenOn的判断</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">a/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java</span><br><span class="line">+++ b/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java</span><br><span class="line">@@ -<span class="number">3352</span>,<span class="number">7</span> +<span class="number">3352</span>,<span class="number">7</span> @@ <span class="keyword">public</span> <span class="keyword">class</span> PhoneWindowManager implements WindowManagerPolicy &#123;</span><br><span class="line">             <span class="keyword">case</span> KeyEvent.KEYCODE_VOLUME_MUTE: &#123;</span><br><span class="line">                 <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) &#123;</span><br><span class="line">                     <span class="keyword">if</span> (down) &#123;</span><br><span class="line">-                        <span class="keyword">if</span> (isScreenOn &amp;&amp; !mVolumeDownKeyTriggered</span><br><span class="line">+                        <span class="keyword">if</span> (!mVolumeDownKeyTriggered</span><br><span class="line">                                 &amp;&amp; (event.getFlags() &amp; KeyEvent.FLAG_FALLBACK) == <span class="number">0</span>) &#123;</span><br><span class="line">                             mVolumeDownKeyTriggered = <span class="literal">true</span>;</span><br><span class="line">                             mVolumeDownKeyTime = event.getDownTime();</span><br><span class="line">@@ -<span class="number">3366</span>,<span class="number">7</span> +<span class="number">3366</span>,<span class="number">7</span> @@ <span class="keyword">public</span> <span class="keyword">class</span> PhoneWindowManager implements WindowManagerPolicy &#123;</span><br><span class="line">                     &#125;</span><br><span class="line">                 &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_VOLUME_UP) &#123;</span><br><span class="line">                     <span class="keyword">if</span> (down) &#123;</span><br><span class="line">-                        <span class="keyword">if</span> (isScreenOn &amp;&amp; !mVolumeUpKeyTriggered</span><br><span class="line">+                        <span class="keyword">if</span> (!mVolumeUpKeyTriggered</span><br><span class="line">                                 &amp;&amp; (event.getFlags() &amp; KeyEvent.FLAG_FALLBACK) == <span class="number">0</span>) &#123;</span><br><span class="line">                             mVolumeUpKeyTriggered = <span class="literal">true</span>;</span><br><span class="line">                             cancelPendingPowerKeyAction();</span><br></pre></td></tr></table></figure>
<p>不让按键进入suspend</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--- a/drivers/input/keyboard/sun4i-keyboard.c</span><br><span class="line">+++ b/drivers/input/keyboard/sun4i-keyboard.c</span><br><span class="line">@@ -<span class="number">183</span>,<span class="number">7</span> +<span class="number">183</span>,<span class="number">7</span> @@ <span class="keyword">static</span> <span class="keyword">void</span> sun4i_keyboard_suspend(<span class="keyword">struct</span> early_suspend *h)</span><br><span class="line">     </span><br><span class="line">        <span class="keyword">if</span> (NORMAL_STANDBY == standby_type) &#123;</span><br><span class="line">\-               writel(<span class="number">0</span>,KEY_BASSADDRESS + LRADC_CTRL);</span><br><span class="line">\+               <span class="comment">//writel(0,KEY_BASSADDRESS + LRADC_CTRL);</span></span><br><span class="line">        <span class="comment">/*process for super standby*/</span>   </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(SUPER_STANDBY == standby_type) &#123;</span><br><span class="line">                ;</span><br><span class="line">@@ -<span class="number">466</span>,<span class="number">5</span> +<span class="number">466</span>,<span class="number">5</span> @@ MODULE_AUTHOR(<span class="string">" &lt;@&gt;"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Google-Play-搜不到某个应用"><a href="#Google-Play-搜不到某个应用" class="headerlink" title="Google Play 搜不到某个应用"></a>Google Play 搜不到某个应用</h3><p>google play搜不到某个应用的分析和解决方法</p>
<p>   搜不到应用是设备缺少该应用所必须的权限，即使安装了也可能出现部分功能不能正常使用的情况。如何让A1X搜到应用，下面以搜索IDTV应用为例：</p>
<ol>
<li>先在pc上打开google play搜到IDTV这个应用</li>
<li>查看这个应用所需要的权限，需要定位，WIFI等</li>
<li>查看设备所具有的权限etc/permissions/*</li>
<li>比较找到设备所缺少的权限，例如A10默认缺少IDTV所必须的定位权限。</li>
<li>将可疑的权限文件push到etc/permissions/下，恢复出厂设置再次测试能否搜到。</li>
<li>在项目中拷贝所需的权限，例如打开网络定位的功能。</li>
</ol>
<p>如果难以定位缺少所需的权限，其他手机可搜索到，比较etc/permissions/<em>下的内容，反复push，恢复出厂设置后测试。<br>所有权限文件路径：frameworks/native/data/etc/</em></p>
<h3 id="Google-Play-上下载的水果忍者运行出错"><a href="#Google-Play-上下载的水果忍者运行出错" class="headerlink" title="Google Play 上下载的水果忍者运行出错"></a>Google Play 上下载的水果忍者运行出错</h3><p>下载的水果忍者带有广告， 会请求定位服务。没有gps，所以要保证有网络定位功能。</p>
<p>请检查 config_networkLocationProvider 是否为 null</p>
<p>修改： </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"config_networkLocationProviderPackageName"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>com.google.android.location<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="内存使用状态显示问题："><a href="#内存使用状态显示问题：" class="headerlink" title="内存使用状态显示问题："></a>内存使用状态显示问题：</h3><p>现象：<br>在settings-&gt;apps-&gt;观察internal storage 显示信息（有显示已用空间与可用空间的数值）-&gt;点击右边任意一个应用-&gt;返回-&gt;再观察 internal storage 显示信息（无已用空间与可用空间的数值显示）</p>
<p>解决方法：<br><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/src/com/android/settings/applications/ManageApplications.java b/src/com/android/settings/applications/ManageApplications.java</span><br><span class="line">--- a/src/com/android/settings/applications/ManageApplications.java</span><br><span class="line">+++ b/src/com/android/settings/applications/ManageApplications.java</span><br><span class="line">@@ -<span class="number">855</span>,<span class="number">13</span> +<span class="number">855</span>,<span class="number">16</span> @@ <span class="keyword">public</span> <span class="keyword">class</span> ManageApplications extends Fragment implements</span><br><span class="line">mColorBar.setRatios((totalStorage-freeStorage-appStorage)/(<span class="built_in">float</span>)totalStorage,</span><br><span class="line">appStorage/(<span class="built_in">float</span>)totalStorage, freeStorage/(<span class="built_in">float</span>)totalStorage);</span><br><span class="line"><span class="built_in">long</span> usedStorage = totalStorage - freeStorage;</span><br><span class="line">- <span class="keyword">if</span> (mLastUsedStorage != usedStorage) &#123;</span><br><span class="line">+	</span><br><span class="line">+ <span class="comment">//if (mLastUsedStorage != usedStorage) &#123;</span></span><br><span class="line">+ <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">mLastUsedStorage = usedStorage;</span><br><span class="line">String sizeStr = Formatter.formatShortFileSize(getActivity(), usedStorage);</span><br><span class="line">mUsedStorageText.setText(getActivity().getResources().getString(</span><br><span class="line">R.<span class="built_in">string</span>.service_foreground_processes, sizeStr));</span><br><span class="line">&#125;</span><br><span class="line">- <span class="keyword">if</span> (mLastFreeStorage != freeStorage) &#123;</span><br><span class="line">+ <span class="comment">//if (mLastFreeStorage != freeStorage) &#123;</span></span><br><span class="line">+ <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">mLastFreeStorage = freeStorage;</span><br><span class="line">String sizeStr = Formatter.formatShortFileSize(getActivity(), freeStorage);</span><br><span class="line">mFreeStorageText.setText(getActivity().getResources().getString(</span><br></pre></td></tr></table></figure></p>
<h3 id="隐藏状态栏："><a href="#隐藏状态栏：" class="headerlink" title="隐藏状态栏："></a>隐藏状态栏：</h3><p>如果有应用程序的源码，可以在需要隐藏状态栏的activity中添加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"xxx"</span></span><br><span class="line">		  <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span><br><span class="line">          <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.NoTitleBar.Fullscreen"</span> &gt;</span></span><br></pre></td></tr></table></figure>
<p>如果没有应用的源码，在PhoneWindowManager.java文件 finishAnimationLw函数中，针对特殊的应用判断。已有视频播放的参考代码，参照修改即可。</p>
<h3 id="预装APK过大，升级固件在一定百分比出错"><a href="#预装APK过大，升级固件在一定百分比出错" class="headerlink" title="预装APK过大，升级固件在一定百分比出错"></a>预装APK过大，升级固件在一定百分比出错</h3><p>可以试一下做如下修改</p>
<ol>
<li><p>修改 BoardConfig.mk<br>BOARD_SYSTEMIMAGE_PARTITION_SIZE 要比预装的总空间大。</p>
</li>
<li><p>通过更改devices/softwinner/crane_xx/package.sh如下</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mv out/target/product/crane-evb_mmc/system.img out/target/product/crane-evb_mmc/system.img_old</span><br><span class="line">simg2img out/target/product/crane-evb_mmc/system.img_old out/target/product/crane-evb_mmc/system.img</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$PACKAGE</span></span><br><span class="line">./pack -c sun4i -p crane -b evb_mmc</span><br><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure>
<h3 id="蓝牙可用设备会显示之前搜索到但已关闭的设备"><a href="#蓝牙可用设备会显示之前搜索到但已关闭的设备" class="headerlink" title="蓝牙可用设备会显示之前搜索到但已关闭的设备"></a>蓝牙可用设备会显示之前搜索到但已关闭的设备</h3><p>蓝牙的缓存管理CachedBluetoothDeviceManager中， 只有添加设备， 没有清除。</p>
<p>修改如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在CachedBluetoothDeviceManager中添加删除接口</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">removeAllCacheDevices</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">                List&lt;CachedBluetoothDevice&gt; mCachedList = mCachedDevices;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = mCachedList.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                    mCachedList.remove(mCachedList.get(<span class="number">0</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//在startScanning的地方调用，调用方式</span></span><br><span class="line">         mLocalManager = LocalBluetoothManager.getInstance(context);</span><br><span class="line">         <span class="keyword">if</span> (mLocalManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">             Log.e(TAG, <span class="string">"Bluetooth is not supported on this device"</span>);</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line">   mLocalManager.getCachedDeviceManager().removeAllCacheDevices();</span><br></pre></td></tr></table></figure>
<h3 id="修改Launcher显示的列数"><a href="#修改Launcher显示的列数" class="headerlink" title="修改Launcher显示的列数"></a>修改Launcher显示的列数</h3><p>将Launcher修改为7列, 如下两种方法均可.</p>
<p>方法1: workspace.xml 文件中, 在 launcher:defaultScreen=”2” 的下面增加一行: launcher:cellCountX=”7”</p>
<p>方法2: dimens.xml 文件中, 修改workspace_cell_width的值. 改小, 使屏幕宽度除以这个值大于7.</p>
<h3 id="状态栏的日期格式不随设置的日期格式改变"><a href="#状态栏的日期格式不随设置的日期格式改变" class="headerlink" title="状态栏的日期格式不随设置的日期格式改变"></a>状态栏的日期格式不随设置的日期格式改变</h3><p>修改如下:<br>文件: frameworks\base\packages\SystemUI\src\com\android\systemui\statusbar\policy\DateView.java<br>函数: updateClock<br>CharSequence date = DateFormat.getLongDateFormat(context).format(now); // java语言长日期格式<br>改为<br>CharSequence date = DateFormat.getDateFormat(context).format(now);  // 从设置读取日期格式</p>
<h3 id="超请播放器分享功能相关问题"><a href="#超请播放器分享功能相关问题" class="headerlink" title="超请播放器分享功能相关问题"></a>超请播放器分享功能相关问题</h3><p>现象：<br>在A13的1.5版本上，客户在美国那边发现在超清播放器里面图片分享的功能，如果只安装了gmail或者email的时候无法使用，但是安装了比如facebook、twitter这些东西之后就可以使用了</p>
<p>解决方法：<br>在 frameworks\base\core\java\android\widget\ActivityChooserView.java<br> public ActivityChooserView(Context context, AttributeSet attrs, int defStyle) {  这个函数大概 239 行，</p>
<p> mAdapter = new ActivityChooserViewAdapter(); 加上</p>
<p> mAdapter.setShowFooterView(true);</p>
<h3 id="Google-Chrome-进Setting-停止运行"><a href="#Google-Chrome-进Setting-停止运行" class="headerlink" title="Google Chrome 进Setting 停止运行"></a>Google Chrome 进Setting 停止运行</h3><p>现象：<br>通过play store下载安装Google Chrome。打开该浏览器，点右上角菜单，选择“Settings”，出现停止运行提示。</p>
<p>解决方法：<br>与尺寸有关,小尺寸有问题.使用的preference_headers.xml不同.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改文件 frameworks\base\core\java\android\preference\PreferenceActivity.java</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Header <span class="title">onGetInitialHeader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 添加这个for循环</span></span><br><span class="line">    <span class="keyword">for</span> (Header h : mHeaders) &#123;</span><br><span class="line">            <span class="keyword">if</span> (h.fragment != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> h;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mHeaders.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="升级后首次开机不显示音量图标"><a href="#升级后首次开机不显示音量图标" class="headerlink" title="升级后首次开机不显示音量图标"></a>升级后首次开机不显示音量图标</h3><p>现象：<br>升级后首次开机需要先待机锁屏再解锁，才能显示音量图标</p>
<p>解决方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 TabletStatusBar.java 文件的 makeStatusBarView 函数中,</span></span><br><span class="line">mVolumeDownButton = mNavigationArea.findViewById(R.id.volume_down);</span><br><span class="line">mVolumeUpButton = mNavigationArea.findViewById(R.id.volume_up);</span><br><span class="line"><span class="comment">// 增加下面这个if分支</span></span><br><span class="line"><span class="keyword">if</span>(mContext.getResources().getBoolean(R.bool.hasVolumeButton))</span><br><span class="line">&#123;</span><br><span class="line">mVolumeUpButton.setVisibility(View.VISIBLE);</span><br><span class="line">mVolumeDownButton.setVisibility(View.VISIBLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="视频实时旋转"><a href="#视频实时旋转" class="headerlink" title="视频实时旋转"></a>视频实时旋转</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//1.frameworks\base\services\surfaceflinger\SurfaceTextureLayer.cpp 中修改一下函数</span></span><br><span class="line">uint32_t SurfaceTextureLayer::getParameter(uint32_t cmd) </span><br><span class="line">&#123;</span><br><span class="line">    uint32_t res = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">/* if(cmd == NATIVE_WINDOW_CMD_GET_SURFACE_TEXTURE_TYPE) &#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">*/</span> </span><br><span class="line">    <span class="function">sp&lt;Layer&gt; <span class="title">layer</span><span class="params">(mLayer.promote()</span>)</span>;</span><br><span class="line">    <span class="keyword">if</span> (layer != NULL) </span><br><span class="line">    &#123;</span><br><span class="line">        res = layer-&gt;getDisplayParameter(cmd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//2.在frameworks\base\policy\src\com\android\internal\policy\impl\PhoneWindowManager.java  中</span></span><br><span class="line">rotationForOrientationLw() 函数里 注释掉多余的</span><br><span class="line"><span class="comment">// if(MediaPlayer.isPlayingVideo())</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// Log.i(TAG, "MediaPlayer.isPlayingVideo");</span></span><br><span class="line"><span class="comment">// if(SystemProperties.getInt("ro.sf.hwrotation",0)==270)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// sensorRotation = Surface.ROTATION_90;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// else</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// sensorRotation = Surface.ROTATION_0;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// else</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line">Log.i(TAG, <span class="string">"MediaPlayer.is not PlayingVideo"</span>);</span><br><span class="line">sensorRotation = mOrientationListener.getProposedRotation(); <span class="comment">// may be -1</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.修改 packages\apps\Gallery2\AndroidManifest.xml  修改</span></span><br><span class="line">        &lt;activity android:name=<span class="string">"com.android.gallery3d.app.MovieActivity"</span></span><br><span class="line">                android:label=<span class="string">"@string/movie_view_label"</span></span><br><span class="line">android:configChanges=<span class="string">"keyboardHidden|orientation"</span></span><br><span class="line">                android:theme=<span class="string">"@style/Theme.Movie"</span> &gt;</span><br></pre></td></tr></table></figure>
<h3 id="开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失"><a href="#开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失" class="headerlink" title="开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失"></a>开启wifi连3G会出现wifi和3G两个图标，退出3G后3G图标不消失</h3><p>修改如红色代码所示：</p>
<p>./frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/policy/NetworkController.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">refreshViews</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Context context = mContext;</span><br><span class="line">       <span class="keyword">int</span> combinedSignalIconId = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">int</span> combinedActivityIconId = <span class="number">0</span>;</span><br><span class="line">       String combinedLabel = <span class="string">""</span>;</span><br><span class="line">       String wifiLabel = <span class="string">""</span>;</span><br><span class="line">       String mobileLabel = <span class="string">""</span>;</span><br><span class="line">       <span class="keyword">int</span> N;</span><br><span class="line">        <span class="keyword">if</span> (mWifiConnected &amp;&amp; !mDataConnected) &#123;</span><br><span class="line">            mDataSignalIconId = mPhoneSignalIconId = <span class="number">0</span>;</span><br><span class="line">           mobileLabel = <span class="string">""</span>;</span><br><span class="line">       &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">if</span> (!mHasMobileDataFeature) &#123;</span><br><span class="line">           mDataSignalIconId = mPhoneSignalIconId = <span class="number">0</span>;</span><br><span class="line">           mobileLabel = <span class="string">""</span>;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br></pre></td></tr></table></figure>
<h3 id="解锁界面应用图标特大"><a href="#解锁界面应用图标特大" class="headerlink" title="解锁界面应用图标特大"></a>解锁界面应用图标特大</h3><p>frameworks\base\core\java\com\android\internal\widget\multiwaveview\MultiWaveView.java<br>把下面代码红色部分注释掉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTargetResources</span><span class="params">(ArrayList&lt;Drawable&gt; drawables)</span></span>&#123;       Resources res = getContext().getResources();       <span class="keyword">int</span> count = drawables.size();  Drawable drawable = <span class="keyword">null</span>;       ArrayList&lt;TargetDrawable&gt; targetDrawables = <span class="keyword">new</span> ArrayList&lt;TargetDrawable&gt;(count);  <span class="keyword">if</span>(count &gt; mMaxAppIconNum)  count = mMaxAppIconNum;        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;<span class="keyword">if</span>(i!=<span class="number">0</span>)&#123;            drawable = zoomDrawable(drawables.get(i),mIconSize,mIconSize);&#125;<span class="keyword">else</span>&#123;   drawable = drawables.get(i);&#125;  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTargetResources</span><span class="params">(ArrayList&lt;Drawable&gt; drawables)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">Resources res = getContext().getResources();</span><br><span class="line"><span class="keyword">int</span> count = drawables.size();</span><br><span class="line">Drawable drawable = <span class="keyword">null</span>;</span><br><span class="line"> ArrayList&lt;TargetDrawable&gt; targetDrawables = <span class="keyword">new</span> ArrayList&lt;TargetDrawable&gt;(count);</span><br><span class="line"><span class="keyword">if</span>(count &gt; mMaxAppIconNum)</span><br><span class="line">count = mMaxAppIconNum;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line"><span class="comment">// if(i!=0)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// drawable = zoomDrawable(drawables.get(i),mIconSize,mIconSize);</span></span><br><span class="line"><span class="comment">// &#125;else</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line">drawable = drawables.get(i);</span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="高清播放器图片预览时，不是居中"><a href="#高清播放器图片预览时，不是居中" class="headerlink" title="高清播放器图片预览时，不是居中"></a>高清播放器图片预览时，不是居中</h3><p>修改<br> packages\apps\Gallery2\src\com\android\gallery3d\ui\SlideshowView.java  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(GLCanvas canvas)</span> </span>&#123;</span><br><span class="line"><span class="comment">//            float centerX = viewWidth / 2 + mMovingVector.x * mProgress;//            float centerY = viewHeight / 2 + mMovingVector.y * mProgress;                        float centerX = viewWidth / 2 ;            float centerY = viewHeight / 2 ;//            float centerX = viewWidth / 2 + mMovingVector.x * mProgress;//            float centerY = viewHeight / 2 + mMovingVector.y * mProgress;                        float centerX = viewWidth / 2 ;            float centerY = viewHeight / 2 ;约 152 行</span></span><br><span class="line">    <span class="comment">// float centerX = viewWidth / 2 + mMovingVector.x * mProgress;</span></span><br><span class="line">   <span class="comment">//  float centerY = viewHeight / 2 + mMovingVector.y * mProgress;</span></span><br><span class="line">  <span class="keyword">float</span> centerX = viewWidth / <span class="number">2</span> ;</span><br><span class="line">  <span class="keyword">float</span> centerY = viewHeight / <span class="number">2</span> ;</span><br></pre></td></tr></table></figure>
<h3 id="休眠间歇性唤醒"><a href="#休眠间歇性唤醒" class="headerlink" title="休眠间歇性唤醒"></a>休眠间歇性唤醒</h3><p>现象：<br>在standby时，系统间歇性会被唤醒</p>
<p>解决方法：<br>由于android本身timer机制导致，可以通过如下配置进行优化：</p>
<ol>
<li>进入menuconfig</li>
<li>选择device drivers -&gt; real time clock</li>
<li>选择android alarm clock wakeup</li>
</ol>
<h3 id="音乐播放器中，均衡器界面不起作用"><a href="#音乐播放器中，均衡器界面不起作用" class="headerlink" title="音乐播放器中，均衡器界面不起作用"></a>音乐播放器中，均衡器界面不起作用</h3><p>现象：<br>音乐播放器，选择 ‘音效’ ，出现 均衡器 界面，界面上所有操作都不起作用</p>
<p>解决方法：<br>修改<br>packages\apps\MusicFX\src\com\android\musicfx\ActivityMusic.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123; </span><br><span class="line"><span class="comment">//中 460 行 </span></span><br><span class="line">\\ mIsHeadsetOn = (audioManager.isWiredHeadsetOn() || audioManager.isBluetoothA2dpOn());</span><br><span class="line"><span class="comment">// 改为 mIsHeadsetOn = true;</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateUI</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//中 551 行</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line">final boolean isEnabled = ControlPanelEffect.getParameterBoolean(mContext,                mCallingPackageName, mAudioSession, ControlPanelEffect.Key.global_enabled);final boolean isEnabled = ControlPanelEffect.getParameterBoolean(mContext,                mCallingPackageName, mAudioSession, ControlPanelEffect.Key.global_enabled);final boolean isEnabled = ControlPanelEffect.getParameterBoolean(mContext,                mCallingPackageName, mAudioSession, ControlPanelEffect.Key.global_enabled);  * final boolean isEnabled = ControlPanelEffect.getParameterBoolean(mContext,</span><br><span class="line">* mCallingPackageName, mAudioSession, ControlPanelEffect.Key.global_enabled);</span><br><span class="line">**/</span></span><br><span class="line"><span class="comment">// 改为</span></span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">boolean</span> isEnabled = ControlPanelEffect.getParameterBoolean(mContext,</span><br><span class="line"> mCallingPackageName, mAudioSession, ControlPanelEffect.Key.virt_enabled);</span><br></pre></td></tr></table></figure></p>
<h3 id="修改播放器拖动时的状态条宽度"><a href="#修改播放器拖动时的状态条宽度" class="headerlink" title="修改播放器拖动时的状态条宽度"></a>修改播放器拖动时的状态条宽度</h3><p>修改<br>android4.0\packages\apps\Gallery2\res\layout\media_status.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span>        <span class="tag">&lt;<span class="name">SeekBar</span>            <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span>            <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span>            <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span>            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span>            <span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span><span class="tag">&lt;<span class="name">SeekBar</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">"@+id/mediacontroller_progress"</span></span><br><span class="line"> <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">"0dip"</span></span><br><span class="line"><span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span><br><span class="line"><span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span></span><br><span class="line"><span class="attr">android:layout_height</span>=<span class="string">"60dip"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>数值根据需要进行调整。</p>
<h3 id="Music播放器无法点击前一首"><a href="#Music播放器无法点击前一首" class="headerlink" title="Music播放器无法点击前一首"></a>Music播放器无法点击前一首</h3><p>修改 android4.0\packages\apps\Music\src\com\android\music\MediaPlaybackActivity.java<br> 431行 onClick（）函数里<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mService == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">                   mService.prev();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (RemoteException ex) &#123;</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Google拼音输入法，横屏时有些应用没有中文选项"><a href="#Google拼音输入法，横屏时有些应用没有中文选项" class="headerlink" title="Google拼音输入法，横屏时有些应用没有中文选项"></a>Google拼音输入法，横屏时有些应用没有中文选项</h3><p>现象：</p>
<p>google拼音版本1.2版. 在launcher自定义文件夹名称, email输入邮件主题等横屏输入中文时, 不显示中文候选框, 无法输入.</p>
<p>解决方法：</p>
<p>在横屏时全屏来输入, 去掉相应布局文件中的 android:imeOptions=”flagNoExtractUi”.</p>
<h3 id="播放电影字幕与菜单重叠"><a href="#播放电影字幕与菜单重叠" class="headerlink" title="播放电影字幕与菜单重叠"></a>播放电影字幕与菜单重叠</h3><p>现象：</p>
<p>播放外带字幕电影，播放电影且已有字幕出现在屏幕上时触摸屏幕调出子菜单，字幕和菜单重叠，下一条字幕出现时则恢复正常。</p>
<p>解决方法：</p>
<p>修改 Gallery2\src\com\android\gallery3d\app\MediaController.java  在initControllerView  函数最后加 mUpSubPos += 10; 即可</p>
<h3 id="卡启动，Nand分区识别"><a href="#卡启动，Nand分区识别" class="headerlink" title="卡启动，Nand分区识别"></a>卡启动，Nand分区识别</h3><p>现象：</p>
<p>卡启动时，如何识别到nand并对其进行操作</p>
<p>解决方法：</p>
<p>关于要在卡启动识别到nand，有两种情况：</p>
<ol>
<li>nand上已经有分区；</li>
<li><p>nand是裸片；</p>
<p>第一种情况下卡启动时nand驱动能够初始化成功，用户可以通过mount命令挂载nand的分区；<br>第二种情况下要先给nand一个虚拟的mbr，使得启动时nand能够初始化成功，<br>可以通过修改nand驱动的源码达到这一目的。</p>
<p>A10平台修改linux-3.0/drivers/block/sun4i_nand/nfd/mbr.c<br>A1X平台修改linux-3.0/drivers/block/sun5i_nand/nfd/mbr.c</p>
</li>
</ol>
<p>具体改动如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mbr2disks</span><span class="params">(<span class="keyword">struct</span> nand_disk* disk_array)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">         <span class="keyword">int</span> part_cnt = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">int</span> part_index;</span><br><span class="line">\<span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">         <span class="keyword">if</span>(_get_mbr())&#123;</span><br><span class="line">                   printk(<span class="string">"get mbr error\n"</span> );</span><br><span class="line">                   return part_cnt;</span><br><span class="line">         &#125;</span><br><span class="line">         part_index = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">for</span>(part_cnt = <span class="number">0</span>; part_cnt&lt;MAX_PART_COUNT; part_cnt++)</span><br><span class="line">                   part_secur[part_index] = <span class="number">0</span>;       </span><br><span class="line">         <span class="comment">//查找出所有的LINUX盘符</span></span><br><span class="line">         <span class="keyword">for</span>(part_cnt = <span class="number">0</span>; part_cnt &lt; mbr-&gt;PartCount &amp;&amp; part_cnt &lt; MAX_PART_COUNT; part_cnt++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="comment">//if((mbr-&gt;array[part_cnt].user_type == 2) || (mbr-&gt;array[part_cnt].user_type == 0))</span></span><br><span class="line">             &#123;</span><br><span class="line">                            PRINT(<span class="string">"The %d disk name = %s, class name = %s, disk size = %d\n"</span>, part_index, mbr-&gt;<span class="built_in">array</span>[part_cnt].name,</span><br><span class="line">                             mbr-&gt;<span class="built_in">array</span>[part_cnt].classname, mbr-&gt;<span class="built_in">array</span>[part_cnt].lenlo);</span><br><span class="line">                            disk_array[part_index].offset = mbr-&gt;<span class="built_in">array</span>[part_cnt].addrlo;</span><br><span class="line">                            disk_array[part_index].size = mbr-&gt;<span class="built_in">array</span>[part_cnt].lenlo;</span><br><span class="line">                            part_secur[part_index] = mbr-&gt;<span class="built_in">array</span>[part_cnt].user_type;</span><br><span class="line">                            part_index ++;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         disk_array[part_index - <span class="number">1</span>].size = DiskSize - mbr-&gt;<span class="built_in">array</span>[mbr-&gt;PartCount - <span class="number">1</span>].addrlo;</span><br><span class="line">         _free_mbr();</span><br><span class="line">         PRINT(<span class="string">"The %d disk size = %lu\n"</span>, part_index - <span class="number">1</span>, disk_array[part_index - <span class="number">1</span>].size);</span><br><span class="line">         PRINT(<span class="string">"part total count = %d\n"</span>, part_index);</span><br><span class="line">\<span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">         part_index = <span class="number">1</span>;</span><br><span class="line">         disk_array[<span class="number">0</span>].offset = <span class="number">0</span>;</span><br><span class="line">         disk_array[<span class="number">0</span>].size = DiskSize;</span><br><span class="line">         part_secur[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">\<span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">         return part_index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Android4-0-蓝牙键盘不能用"><a href="#Android4-0-蓝牙键盘不能用" class="headerlink" title="Android4.0 蓝牙键盘不能用"></a>Android4.0 蓝牙键盘不能用</h3><p>在menuconfig中，打开HIDP protocol support选项为y</p>
<h3 id="让多台机器公用一个下载帐号"><a href="#让多台机器公用一个下载帐号" class="headerlink" title="让多台机器公用一个下载帐号"></a>让多台机器公用一个下载帐号</h3><p>将授权机器的密钥文件（id_rsa和id_rsa.pub）copy到新机器用户目录下面的.ssh文件夹里，如果没有就新建。<br>同时将相关文件的权限进行修改：<br>owner  和group 设置成新机器上的用户<br>id_rsa文件权限设置成600</p>
<h3 id="高清播放器删除最后一张图片，图片再无法移动"><a href="#高清播放器删除最后一张图片，图片再无法移动" class="headerlink" title="高清播放器删除最后一张图片，图片再无法移动"></a>高清播放器删除最后一张图片，图片再无法移动</h3><p>改 Gallery2\src\com\android\gallery3d\ui\PhotoView.java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startSlideInAnimation</span><span class="params">(<span class="keyword">int</span> direction)</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">        mTransitionMode = direction; 改成  mTransitionMode = TRANS_NONE;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="在系统中去掉蓝牙相关功能"><a href="#在系统中去掉蓝牙相关功能" class="headerlink" title="在系统中去掉蓝牙相关功能"></a>在系统中去掉蓝牙相关功能</h3><p>现象：</p>
<p>小机不带蓝牙功能，但系统自带的widget上有蓝牙选项，该如何去掉？</p>
<p>解决方法：</p>
<p>在android4.0\device\softwinner\crane-common\tablet_core_hardware.xml中<br>注释掉<br><figure class="highlight xml"><figcaption><span><feature name="android.hardware.bluetooth" <="" span=""><a href="/>">```</a></feature></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 默认竖屏模式下，高清播放器休眠后自动播放视频</span><br><span class="line"></span><br><span class="line">现象：</span><br><span class="line"></span><br><span class="line">默认竖屏模式下，高清播放器休眠后自动播放视频</span><br><span class="line"></span><br><span class="line">解决方法：</span><br><span class="line"></span><br><span class="line">由于播放器，不支持竖屏模式，所以休眠之后，由于横竖屏切换，导致播放器再次运行 可以适当的延长播放器的暂停时间，以回避这问题。 packages\apps\Gallery2\src\com\android\gallery3d\app\MovieActivity.java</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">import android.os.PowerManager; </span><br><span class="line">import android.content.Context; </span><br><span class="line">import android.os.SystemClock;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">private PowerManager mPowerManager; </span><br><span class="line">@Override</span><br><span class="line">public void onCreate(Bundle icicle) &#123;</span><br><span class="line">	mPowerManager = (PowerManager)getApplicationContext().getSystemService(Context.POWER_SERVICE); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void onPause() &#123;  </span><br><span class="line">	if(mPowerManager != null)&#123; </span><br><span class="line">		if(!mPowerManager.isScreenOn())&#123; </span><br><span class="line">			SystemClock.sleep(1000);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	mControl.onPause();super.onPause();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="字体为超大时，竖屏在解锁界面，解锁的图标显示不全"><a href="#字体为超大时，竖屏在解锁界面，解锁的图标显示不全" class="headerlink" title="字体为超大时，竖屏在解锁界面，解锁的图标显示不全"></a>字体为超大时，竖屏在解锁界面，解锁的图标显示不全</h3><p>现象：</p>
<p>800x600,lcd_denisty 160</p>
<p>解决方法：</p>
<p>frameworks/base/core/res/res/layout-sw600dp/keyguard_screen_tab_unlock.xml</p>
<p>适当加大72行的android:layout_weight=”1”</p>
<p>这样解锁部分的面积会增加，解决这个问题</p>
<p>其他分辨率需要修改其他layout文件夹下的keyguard_screen_tab_unlock.xml</p>
<h3 id="音效里的Normal和Flat功能反"><a href="#音效里的Normal和Flat功能反" class="headerlink" title="音效里的Normal和Flat功能反"></a>音效里的Normal和Flat功能反</h3><p>frameworks/base/media/libeffects/lvm/wrapper/Bundle/EffectBundle.h</p>
<p>gEqualizerPresets数组,名字可以随意修改</p>
<h3 id="动态壁纸，线性光幕效果有黑块"><a href="#动态壁纸，线性光幕效果有黑块" class="headerlink" title="动态壁纸，线性光幕效果有黑块"></a>动态壁纸，线性光幕效果有黑块</h3><p>效果：</p>
<p>将壁纸设为动态壁纸中的“线性光幕效果”时，在主界面旋转屏幕时未显示完整，即往边上拉存在黑块问题。</p>
<p>解决方法：</p>
<p>修改：<br>android\packages\wallpapers\Basic\src\com\android\wallpaper\nexus\NexusRS.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOffset</span><span class="params">(<span class="keyword">float</span> xOffset, <span class="keyword">float</span> yOffset, <span class="keyword">int</span> xPixels, <span class="keyword">int</span> yPixels)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//mXOffset = xOffset; </span></span><br><span class="line">    <span class="comment">//mScript.set_gXOffset(xOffset);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改Setting里面各字体对应的大小"><a href="#修改Setting里面各字体对应的大小" class="headerlink" title="修改Setting里面各字体对应的大小"></a>修改Setting里面各字体对应的大小</h3><p>现象：</p>
<p>感觉setting里面字体大小选择的变化幅度太大，希望小不要太小，特大不要太大，每级变化的幅度缩小点该如何修改</p>
<p>解决方法：</p>
<p>android4.0\packages\apps\Settings\res\values\arrays.xml 文件里</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span>        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span>    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span>    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.85<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.30<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br><span class="line">默认是0.15的梯度 改成合适的梯度如</span><br><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">"entryvalues_font_size"</span> <span class="attr">translatable</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>0.90<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>1.20<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="浏览器为Android模式时在线看视频卡"><a href="#浏览器为Android模式时在线看视频卡" class="headerlink" title="浏览器为Android模式时在线看视频卡"></a>浏览器为Android模式时在线看视频卡</h3><p>现象：</p>
<p>A10</p>
<ol>
<li>在浏览时有时偶尔会退出</li>
<li>浏览器用android模式，看在线视频十几分钟左右后会卡，但用ipad模式不会卡</li>
</ol>
<p>问题分析：</p>
<ol>
<li>需要具体分析问题，我们其它客户案上浏览正常</li>
<li>android模式采用的flash格式播放，而ipad采用的html5。flash由于自身格式和片源分割的关系，在线视频有机率产生不同步或卡顿问题。该问题由flash自身引起，这也是为何flash会逐渐被html5取代的一个方面。</li>
</ol>
<h3 id="Android2-3上开启U盘自扫描"><a href="#Android2-3上开启U盘自扫描" class="headerlink" title="Android2.3上开启U盘自扫描"></a>Android2.3上开启U盘自扫描</h3><p>现象；</p>
<p>插入U盘后在播放器中看不到U盘文件，如何才能打开</p>
<p>解决方法：</p>
<p>需修改<br>frameworks\base\core\java\android\provider\Settings.java<br>frameworks\base\packages\SettingsProvider\src\com\android\providers\settings\DatabaseHelper.java<br>packages\providers\MediaProvider\src\com\android\providers\media\MediaScannerReceiver.java<br>packages\providers\MediaProvider\src\com\android\providers\media\MediaScannerService.java</p>
<p>具体修改如若无法完成，可参考相关补丁包—-补丁呢!!!</p>
<h3 id="如何降低CPU最高频率"><a href="#如何降低CPU最高频率" class="headerlink" title="如何降低CPU最高频率"></a>如何降低CPU最高频率</h3><p>现象：</p>
<p>目前系统为动态调频，如何限定最高CPU频率</p>
<p>解决方法：</p>
<p>降低CPU频率需要作以下两个修改：</p>
<ol>
<li><p>在lichee\tools\pack\chips\sun5i\configs\android\xxx\sys_config1.fex文件(“xxx”为对应的方案配置文件目录)中修改启动频率：</p>
<pre><code>[target]boot_clock =1008
</code></pre><p> boot_clock为启动的CPU频率，单位为MHz，根据需要自行修改，该值不能大于最高频率；</p>
</li>
<li><p>在lichee\linux-3.0\arch\arm\mach-sun4i\cpu-freq\cpu-freq.h文件中修改CPU的最高频率：</p>
<pre><code> #define SUN4I_CPUFREQ_MAX       (1008000000)
SUN4I_CPUFREQ_MAX为CPU允许运行的最高频率，单位是Hz，根据需要自行修改；
</code></pre></li>
</ol>
<h3 id="修改sys-config-fex，不升级整个固件，就使其生效"><a href="#修改sys-config-fex，不升级整个固件，就使其生效" class="headerlink" title="修改sys_config.fex，不升级整个固件，就使其生效"></a>修改sys_config.fex，不升级整个固件，就使其生效</h3><ol>
<li>在android shell中将/dev/block/nanda mount到某个节点:<br> mount -t vfat /dev/block/nanda /mnt/nand</li>
<li>修改sys_config1后build固件，然后在lichee\tools\pack\out\bootfs下找到scrpt.bin和script0.bin</li>
<li>然后用adb连接后，将scritp.bin和script0.bin推到所mount节点的根目录下，替换原有同名文件:<br> adb push script*.bin  /mnt/nand/</li>
<li>最后sync重启即可<br> adb shell<br> sync<br> reboot</li>
</ol>
<h3 id="修改浏览器默认浏览模式"><a href="#修改浏览器默认浏览模式" class="headerlink" title="修改浏览器默认浏览模式"></a>修改浏览器默认浏览模式</h3><p>在android4.0.1/packages/apps/Browser/res/xml/debug_preferences.xml中将</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ListPreference</span></span><br><span class="line">         <span class="attr">android:key</span>=<span class="string">"user_agent"</span></span><br><span class="line">         <span class="attr">android:title</span>=<span class="string">"@string/pref_development_uastring"</span></span><br><span class="line">         <span class="attr">android:entries</span>=<span class="string">"@array/pref_development_ua_choices"</span></span><br><span class="line">         <span class="attr">android:entryValues</span>=<span class="string">"@array/pref_development_ua_values"</span></span><br><span class="line">         <span class="attr">android:defaultValue</span>=<span class="string">"3"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>中修改defaultValue的值,对应如下:<br>Android  :0<br>Desktop :1<br>iPhone:2<br>iPad :3<br>Froyo-N1:4<br>Honeycomb-Xoom:5</p>
<h3 id="电源管理不准以及低电不关机"><a href="#电源管理不准以及低电不关机" class="headerlink" title="电源管理不准以及低电不关机"></a>电源管理不准以及低电不关机</h3><p>现象：</p>
<p>v1.0和v1.1中感觉电池电量不准，在低电情况下，系统也没有自动关机</p>
<p>解决方法：</p>
<p>需确认sys_config1.fex以下几个地方：</p>
<ol>
<li>pmu_battery_rdc的值为100</li>
<li>pmu_battery_cap为正确的电池电量</li>
<li>pmu_bat_para的放电曲线校正</li>
</ol>
<p>对于低电系统没有自动关机问题，一般尝试修改pmu_battery_cap：<br>pmu_bat_para4            = 0<br>pmu_bat_para5            = 5</p>
<h3 id="如何单独替换内核"><a href="#如何单独替换内核" class="headerlink" title="如何单独替换内核"></a>如何单独替换内核</h3><p>现象：</p>
<p>有没有办法不升级整个固件，单独替换内核</p>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在android shell中将/dev/block/nanda mount到某个节点:</span><br><span class="line">mount -t vfat /dev/block/nanda /mnt/nand</span><br><span class="line">然后用adb连接后，将bImage直接push到所mount节点的linux目录下，替换bImage:</span><br><span class="line">adb push bImage /mnt/nand/linux</span><br><span class="line">最后sync重启即可</span><br><span class="line">adb shell</span><br><span class="line">sync</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h3 id="摄像头Zoom功能生效"><a href="#摄像头Zoom功能生效" class="headerlink" title="摄像头Zoom功能生效"></a>摄像头Zoom功能生效</h3><p>修改packages/apps/Camera/src/com/android/camera/ui/IndicatorControlWheel.java</p>
<p>dispatchTouchEvent函数，第269行</p>
<p>if ((mZoomControl != null) &amp;&amp; (index == 0)) {   </p>
<p>改为</p>
<p>if ((mZoomControl != null) &amp;&amp; (index == 0) &amp;&amp; mCurrentLevel == 0) {</p>
<h3 id="录象时不能选择分辨率"><a href="#录象时不能选择分辨率" class="headerlink" title="录象时不能选择分辨率"></a>录象时不能选择分辨率</h3><p>现象：</p>
<p>摄像头录像时，选择分辨率的选项没有</p>
<p>解决实例：</p>
<p>如果想在720p和480p之间选择，在mediaprofile.xml文件中，按如下设置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CamcorderProfiles</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">EncoderProfile</span> <span class="attr">quality</span>=<span class="string">"720p"</span> <span class="attr">fileFormat</span>=<span class="string">"mp4"</span> <span class="attr">duration</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Video</span> <span class="attr">codec</span>=<span class="string">"h264"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"3000000"</span></span><br><span class="line">                   <span class="attr">width</span>=<span class="string">"1280"</span></span><br><span class="line">                   <span class="attr">height</span>=<span class="string">"720"</span></span><br><span class="line">                   <span class="attr">frameRate</span>=<span class="string">"30"</span> /&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">Audio</span> <span class="attr">codec</span>=<span class="string">"aac"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"128000"</span></span><br><span class="line">                   <span class="attr">sampleRate</span>=<span class="string">"44100"</span></span><br><span class="line">                   <span class="attr">channels</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">EncoderProfile</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">EncoderProfile</span> <span class="attr">quality</span>=<span class="string">"480p"</span> <span class="attr">fileFormat</span>=<span class="string">"mp4"</span> <span class="attr">duration</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Video</span> <span class="attr">codec</span>=<span class="string">"h264"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"1500000"</span></span><br><span class="line">                   <span class="attr">width</span>=<span class="string">"640"</span></span><br><span class="line">                   <span class="attr">height</span>=<span class="string">"480"</span></span><br><span class="line">                   <span class="attr">frameRate</span>=<span class="string">"25"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Audio</span> <span class="attr">codec</span>=<span class="string">"aac"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"12200"</span></span><br><span class="line">                   <span class="attr">sampleRate</span>=<span class="string">"8000"</span></span><br><span class="line">                   <span class="attr">channels</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">EncoderProfile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">EncoderProfile</span> <span class="attr">quality</span>=<span class="string">"timelapse720p"</span> <span class="attr">fileFormat</span>=<span class="string">"mp4"</span> <span class="attr">duration</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Video</span> <span class="attr">codec</span>=<span class="string">"h264"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"3000000"</span></span><br><span class="line">                   <span class="attr">width</span>=<span class="string">"1280"</span></span><br><span class="line">                   <span class="attr">height</span>=<span class="string">"720"</span></span><br><span class="line">                   <span class="attr">frameRate</span>=<span class="string">"30"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- audio setting is ignored --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Audio</span> <span class="attr">codec</span>=<span class="string">"aac"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"128000"</span></span><br><span class="line">                   <span class="attr">sampleRate</span>=<span class="string">"44100"</span></span><br><span class="line">                   <span class="attr">channels</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">EncoderProfile</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">EncoderProfile</span> <span class="attr">quality</span>=<span class="string">"timelapse480p"</span> <span class="attr">fileFormat</span>=<span class="string">"mp4"</span> <span class="attr">duration</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Video</span> <span class="attr">codec</span>=<span class="string">"h264"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"1500000"</span></span><br><span class="line">                   <span class="attr">width</span>=<span class="string">"640"</span></span><br><span class="line">                   <span class="attr">height</span>=<span class="string">"480"</span></span><br><span class="line">                   <span class="attr">frameRate</span>=<span class="string">"25"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Audio</span> <span class="attr">codec</span>=<span class="string">"aac"</span></span><br><span class="line">                   <span class="attr">bitRate</span>=<span class="string">"12200"</span></span><br><span class="line">                   <span class="attr">sampleRate</span>=<span class="string">"8000"</span></span><br><span class="line">                   <span class="attr">channels</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">EncoderProfile</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageEncoding</span> <span class="attr">quality</span>=<span class="string">"90"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageEncoding</span> <span class="attr">quality</span>=<span class="string">"80"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageEncoding</span> <span class="attr">quality</span>=<span class="string">"70"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageDecoding</span> <span class="attr">memCap</span>=<span class="string">"20000000"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Camera</span> <span class="attr">previewFrameRate</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">CamcorderProfiles</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="修改蓝牙名称"><a href="#修改蓝牙名称" class="headerlink" title="修改蓝牙名称"></a>修改蓝牙名称</h3><p>如果你想修改默认的名字，可以这么做：<br>文件external/bluetooth/bluez/src/main.c<br>将main_opts.name  = g_strdup(“BlueZ”);里面的BlueZ换成你想要的名字即可！</p>
<h3 id="为何用UsbManager调用getDeviceList获取设备列表总是空的"><a href="#为何用UsbManager调用getDeviceList获取设备列表总是空的" class="headerlink" title="为何用UsbManager调用getDeviceList获取设备列表总是空的"></a>为何用UsbManager调用getDeviceList获取设备列表总是空的</h3><p>这个是因为缺少android.hardware.usb.host权限，</p>
<p><a href="http://www.oschina.net/code/download_src?file=android-4.0.1%2Fdata%2Fetc%2Fandroid.hardware.usb.host.xml" target="_blank" rel="external">http://www.oschina.net/code/download_src?file=android-4.0.1%2Fdata%2Fetc%2Fandroid.hardware.usb.host.xml</a></p>
<p>下载该文件，放在/system/etc/permisson/下，可以解决</p>
<h3 id="低电自动关机重启"><a href="#低电自动关机重启" class="headerlink" title="低电自动关机重启"></a>低电自动关机重启</h3><p>现象：</p>
<p>低电状态下，自动关机后重启，进不了系统，偶尔能进入系统但是触屏没反应。</p>
<p>解决方法：</p>
<p>原因在于源不足以支持系统开机，而此时电池又电量太低，导致不能满足整个系统的开机功耗。解决方法是提高开机的门限电和Android关机门限。</p>
<ol>
<li><p>boot阶段开机的门限电压设置方法 ：<br>在sys_config1脚本中<br>[boot_extend]<br>vol_threshold = 3500</p>
</li>
<li><p>修改Android 低电关机的门限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BatteryService.<span class="function">java </span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">shutdownIfNoPower</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// shut down gracefully if our battery is critically low and we are not powered.</span></span><br><span class="line">        <span class="comment">// wait until the system has booted before attempting to display the shutdown dialog.</span></span><br><span class="line">        <span class="keyword">if</span> (mBatteryLevel &lt; <span class="number">5</span> &amp;&amp; （<span class="number">5</span>为<span class="number">5</span>%即可关机修改 为更大的值，具体值可以根据具体情况而定）</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="修改鼠标的按键定义"><a href="#修改鼠标的按键定义" class="headerlink" title="修改鼠标的按键定义"></a>修改鼠标的按键定义</h3><p>现象：</p>
<p>鼠标插上以后，左键和右键的功能都是左键的，如何将右键修改为返回</p>
<p>解决方法：</p>
<p>这个是android的标准做法，如果定制，可以修改frameworks/base/services/input/inputreader.cpp文件中的：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint32_t</span> CursorButtonAccumulator::getButtonState() <span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="keyword">uint32_t</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (mBtnLeft) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_PRIMARY;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mBtnRight) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_SECONDARY;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mBtnMiddle) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_TERTIARY;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mBtnBack || mBtnSide) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_BACK;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mBtnForward || mBtnExtra) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_FORWARD;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>目前因为下面函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">isPointerDown</span><span class="params">(int32_t buttonState)</span> </span>&#123;</span><br><span class="line">    return buttonState &amp;</span><br><span class="line">            (AMOTION_EVENT_BUTTON_PRIMARY | AMOTION_EVENT_BUTTON_SECONDARY</span><br><span class="line">                    | AMOTION_EVENT_BUTTON_TERTIARY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将鼠标左右键的功能设置成判断鼠标是否点击的操作，所以功能一致，如果需要修改，这需要改一下上面的getButtonState函数中的标志位即可，比如需要将右键改为后退键，只需要<br>函数中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">if</span> (mBtnRight) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_SECONDARY;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//改为</span></span><br><span class="line">  <span class="keyword">if</span> (mBtnRight) &#123;</span><br><span class="line">        result |= AMOTION_EVENT_BUTTON_BACK;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//即可</span></span><br></pre></td></tr></table></figure>
<h3 id="修改system分区大小"><a href="#修改system分区大小" class="headerlink" title="修改system分区大小"></a>修改system分区大小</h3><ol>
<li><p>修改sys_config.fex中的</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[partition3]</span><br><span class="line">class_name  = DISK</span><br><span class="line">name        = system</span><br><span class="line">size_hi     = 0</span><br><span class="line">size_lo     = 524288     //此处单位为K</span><br><span class="line">user_type   = 2</span><br><span class="line">ro            = 0</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改device对应目录下的BoardConfig.mk中的<br> BOARD_SYSTEMIMAGE_PARTITION_SIZE := 536870912  //此处单位为byte</p>
</li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://github.com/pkjueying/pkjueying.github.io/2013/12/18/XW-Android-01/" data-id="ciod2voa20009ykvr1fho0szm" class="article-share-link">分享到</a><div class="tags"><a href="/tags/work/">work</a></div><div class="post-nav"><a href="/2013/12/29/XW-Android-02/" class="pre">XW-Android-02</a><a href="/2012/11/18/Yii项目实践/" class="next">yii项目实践</a></div><div data-thread-key="2013/12/18/XW-Android-01/" data-title="XW-Android-01" data-url="https://github.com/pkjueying/pkjueying.github.io/2013/12/18/XW-Android-01/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://github.com/pkjueying/pkjueying.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/old-blog/">old blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/罗马人的故事/">罗马人的故事</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/work/" style="font-size: 15px;">work</a> <a href="/tags/Yii/" style="font-size: 15px;">Yii</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/heart/" style="font-size: 15px;">heart</a> <a href="/tags/binder/" style="font-size: 15px;">binder</a> <a href="/tags/book/" style="font-size: 15px;">book</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/05/17/thingking-everyday/">每天随记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/13/don-t-lazy/">don't lazy</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/17/binder01/">binder简要学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/18/罗马人的故事01/">罗马人的故事01</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/08/19/Ubuntu下搭建LNMP环境/">Ubuntu下搭建LNMP环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/04/11/Android-开机动画跟踪/">Android4.2 开机动画跟踪</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/03/10/Android-启动过程代码跟踪/">Android 启动过程代码跟踪</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/12/29/XW-Android-02/">XW-Android-02</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/12/18/XW-Android-01/">XW-Android-01</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/11/18/Yii项目实践/">yii项目实践</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://share2your.info" title="tjl可可" target="_blank">tjl可可</a><ul></ul><a href="http://blog.csdn.net/v_JULY_v?viewmode=contents" title="v_JULY_v数据结构＋算法" target="_blank">v_JULY_v数据结构＋算法</a><ul></ul><a href="http://blog.csdn.net/Luoshengyang?viewmode=contents" title="老罗的android" target="_blank">老罗的android</a><ul></ul><a href="http://cooshell.cn/" title="coolShell" target="_blank">coolShell</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Drogon龘.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'zfltjl080519'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>